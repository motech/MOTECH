<div class="relation-field">
    <button class="btn btn-sm btn-default" target="_self" href="#instanceBrowserModal"  data-toggle="modal"
            data-backdrop="static" ng-click="setRelatedEntity(field)" ng-disabled="field.nonEditable"  ng-if="addedEntity || selectedInstance && !instanceId && !showTrashInstance"
            ui-validate="{relationshipValidation: 'validateRelationshipPresence(field)'}" ui-validate-watch="'field.value.length'" ng-model="field.value">
        <i class="fa fa-lg fa-plus"></i>
        {{msg('mds.dataBrowsing.addRelatedInstance')}}
    </button>
    <br/>
    <div ng-repeat="obj in [].concat(field.value)">
        <div class="related-instances-block" ng-if="obj">
            <div class="related-instance-display">
                {{field.displayValue[relatedId(obj)]}}
            </div>
            <div class="pull-right" ng-if="addedEntity || selectedInstance && !instanceId && !showTrashInstance && !field.nonEditable">
                <a class="btn btn-sm btn-primary" ng-click="editInstanceOfEntity(relatedId(obj), getMetadata(field, 'related.class'))"
                   data-toggle="tooltip" data-placement="top" data-trigger="hover" bs-popover="{{msg('mds.dataBrowsing.editRelatedInstance')}}">
                    <i class="fa fa-lg fa-cogs"></i>
                    {{msg('mds.dataBrowsing.edit')}}
                </a>
                <a class="btn btn-sm btn-danger" ng-click="removeManyRelatedData(field, obj)"
                   data-toggle="tooltip" data-placement="top" data-trigger="hover" bs-popover="{{msg('mds.dataBrowsing.removeRelatedInstance')}}">
                    <i class="fa fa-lg fa-minus"></i>
                </a>
            </div>
        </div>
    </div>
</div>
